
+++ tehstomp-setup +++

This repository contains some simple scripts provided in the scripts/ directory 
whose execution can be automated using the provided Makefile for building and 
installing the tehstomp family of shared libraries and applications.


Install libraries and build applications
=========================================

* make clone
    Running this will clone all of the necessary repos to the correct location.

* make update
    (Optional) Running this will update all repositories to the latest version.

    NOTE: You must run 'make clone' prior to running 'make update'

* make install
    Running this will install the necessary libraries for building the client
    and server applications. This assumes an up-to-date version of the
    Haskell platform installed on the system.

    NOTE: You must run 'make clone' prior to running 'make install'

* make build
    Running this will build the client and broker, and install symlinks to the applications
    that can be run from this directory: broker and client

    NOTE: You must run 'make install' prior to running 'make build'

Cleanup
=======

* make clean
    Running this will clean up build artifacts in the working directory. It does not
    clean out any of the sub-repositories that are checked out via 'make clone'.

* make destroy
    Runs a 'make clean' and additionally removes all of the cloned repositories.

    NOTE: This does NOT uninstall the libraries from your system.

Build artifacts
================

* The following executable binaries are placed in the bin/ directory on 'make build'
    + broker - A STOMP broker
    + client - A CLI STOMP client
    + producer - A simple producer client
    + consumer - A simple consumer client

Initialize the message broker
=============================

bin/broker [port]

Initialize the CLI client application
=====================================

bin/client

Client Application Comands
==========================

Command                       Description
-------                       -----------
session                       Display information about the active session
subs                          Display information about the active subscriptions
connect <host> <ip>           Connect to the STOMP broker at the given host/ip
disconnect                    Gracefully terminate the active session
send <dest> <msg>             Send a message to the given destination
sendr <dest> <rid> <msg>      Send a message to the given destination and request a
                              receipt with the given receipt ID
loopsend <n> <dest> <msg>     Send a message n times to the given destination
subscribe <dest>              Subscribe to the given destination
unsubscribe <dest>|<subid>    Unsubscribe from the given destination; supports passing
                              either the destination name or subscription ID
begin <txid>                  Begin a transaction using the given transaction ID;
                              all send and sendr requests will be added to the transaction
                              until it is either commited or aborted
commit <txid>                 Commit the in-progress transaction
abort <txid>                  Abort the in-progress transaction
exit                          Gracefully terminate the active session and exit
                              the application
help                          Display this help text
